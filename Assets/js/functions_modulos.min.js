function fntViewModulo(e){let t=window.XMLHttpRequest?XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"),o=BaseUrl+"/Modulos/GetModulo/"+e;t.open("GET",o,!0),t.send(),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){let e=JSON.parse(t.responseText);if(e.status){let t=1==e.data.estado?'<span class="badge badge-success">Activo</span>':'<span class="badge badge-danger">Inactivo</span>';document.querySelector("#celTitulo").innerHTML=e.data.titulo,document.querySelector("#celDescripcion").innerHTML=e.data.descripcion,document.querySelector("#celIcono").innerHTML=e.data.icono,document.querySelector("#celRuta").innerHTML=e.data.ruta,document.querySelector("#celEstado").innerHTML=t,$("#modalViewModulo").modal("show")}else swal("¡Error!",e.msg,"error")}}}function fntEditModulo(e,t){rowTable=e.parentNode.parentNode.parentNode,document.querySelector(".modal-header").classList.replace("headerRegister","headerUpdate"),document.querySelector("#btnActionForm").classList.replace("btn-primary","btn-info"),document.querySelector("#btnText").innerHTML="Actualizar",document.querySelector("#titleModal").innerHTML="Actualizar Modulo";let o=window.XMLHttpRequest?XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"),a=BaseUrl+"/Modulos/GetModulo/"+t;o.open("GET",a,!0),o.send(),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){let e=JSON.parse(o.responseText);e.status?(document.querySelector("#idModulo").value=e.data.idModulo,document.querySelector("#txtTitulo").value=e.data.titulo,document.querySelector("#txtDescripcion").value=e.data.descripcion,document.querySelector("#txtIcono").value=e.data.icono,document.querySelector("#txtRuta").value=e.data.ruta,document.querySelector("#listStatus").value=e.data.estado,$("#listStatus").selectpicker("render"),$("#modalFormModulo").modal("show")):swal("¡Error!",e.msg,"error")}}}function openModal(){document.querySelector("#idModulo").value="",document.querySelector(".modal-header").classList.replace("headerUpdate","headerRegister"),document.querySelector("#btnActionForm").classList.replace("btn-info","btn-primary"),document.querySelector("#btnText").innerHTML="Guardar",document.querySelector("#titleModal").innerHTML="Nuevo Modulo",document.querySelector("#formModulo").reset(),$("#modalFormModulo").modal("show")}let rowTable,tableModulos;var divLoading=document.querySelector("#divLoading");document.addEventListener("DOMContentLoaded",function(){tableModulos=$("#tableModulos").dataTable({aProcessing:!0,aServerSide:!0,language:{url:"//cdn.datatables.net/plug-ins/1.10.20/i18n/Spanish.json"},ajax:{url:BaseUrl+"/Modulos/GetModulos",dataSrc:""},columns:[{data:"idmodulo"},{data:"titulo"},{data:"descripcion"},{data:"icono"},{data:"estado"},{data:"options"}],dom:"lBfrtip",buttons:[{extend:"copyHtml5",text:"<i class='fas fa-copy'></i> Copiar",titleAttr:"Copiar",className:"btn btn-secondary"},{extend:"excelHtml5",text:"<i class='fas fa-file-excel'></i> Excel",titleAttr:"Exportar a Excel",className:"btn btn-success"},{extend:"pdfHtml5",text:"<i class='fas fa-file-pdf'></i> PDF",titleAttr:"Exportar a PDF",className:"btn btn-danger"},{extend:"csvHtml5",text:"<i class='fas fa-file-csv'></i> CSV",titleAttr:"Exportar a CSV",className:"btn btn-info"}],responsive:"true",bDestroy:!0,iDisplayLength:10,order:[[0,"asc"]]});let e=document.querySelector("#formModulo");e.onsubmit=function(t){t.preventDefault();let o=document.querySelector("#txtTitulo").value,a=document.querySelector("#txtDescripcion").value,r=document.querySelector("#txtIcono").value,l=document.querySelector("#listStatus").value;document.querySelector("#txtRuta").value;if(""==o||""==a||""==r||""==l)return swal("Atención","Todos los campos son obligatorios","error"),!1;let n=document.getElementsByClassName("valid");for(let e=0;e<n.length;e++)if(n[e].classList.contains("is-invalid"))return swal("Atención","Por favor verifique los campos en rojo.","error"),!1;divLoading.style.display="flex";let s=window.XMLHttpRequest?XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"),d=BaseUrl+"/Modulos/SetModulo",c=new FormData(e);s.open("POST",d,!0),s.send(c),s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){let t=JSON.parse(s.responseText);t.status?(""==rowTable||void 0===rowTable?tableModulos.api().ajax.reload():(rowTable.cells[1].textContent=o,rowTable.cells[2].textContent=a,rowTable.cells[3].textContent=r),$("#modalFormModulo").modal("hide"),e.reset(),swal("Modulos",t.msg,"success")):swal("¡Error!",t.msg,"error")}return divLoading.style.display="none",!1}}},!1);