function fntViewCliente(e){let t=window.XMLHttpRequest?XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"),a=BaseUrl+"/Clientes/GetCliente/"+e;t.open("GET",a,!0),t.send(),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){let e=JSON.parse(t.responseText);if(e.status){console.log(e);let t=1==e.data.status?'<span class="badge badge-success">Activo</span>':'<span class="badge badge-danger">Inactivo</span>';document.querySelector("#celIdentificacion").innerHTML=e.data.identificacion,document.querySelector("#celNombres").innerHTML=e.data.nombres,document.querySelector("#celApellidos").innerHTML=e.data.apellidos,document.querySelector("#celTelefono").innerHTML=e.data.telefono,document.querySelector("#celEmail").innerHTML=e.data.email_user,document.querySelector("#celEstado").innerHTML=t,document.querySelector("#celFechaRegistro").innerHTML=e.data.fechaRegistro,document.querySelector("#IdentificacionTributaria").innerHTML=e.data.nit,document.querySelector("#razonSocial").innerHTML=e.data.nombrefiscal,document.querySelector("#direccionFiscal").innerHTML=e.data.direccionfiscal,$("#modalViewCliente").modal("show")}else swal("¡Error!",e.msg,"error")}}}function fntEditCliente(e,t){rowTable=e.parentNode.parentNode.parentNode,document.querySelector(".modal-header").classList.replace("headerRegister","headerUpdate"),document.querySelector("#btnActionForm").classList.replace("btn-primary","btn-info"),document.querySelector("#btnText").innerHTML="Actualizar",document.querySelector("#titleModal").innerHTML="Actualizar Usuario";let a=window.XMLHttpRequest?XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"),n=BaseUrl+"/Clientes/GetCliente/"+t;a.open("GET",n,!0),a.send(),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){let e=JSON.parse(a.responseText);e.status?(document.querySelector("#idUsuario").value=e.data.idpersona,document.querySelector("#txtIdentificacion").value=e.data.identificacion,document.querySelector("#txtNombres").value=e.data.nombres,document.querySelector("#txtApellidos").value=e.data.apellidos,document.querySelector("#txtTelefono").value=e.data.telefono,document.querySelector("#txtEmail").value=e.data.email_user,document.querySelector("#listStatus").value=e.data.status,document.querySelector("#txtIdentificacionTributaria").value=e.data.nit,document.querySelector("#txtRazon").value=e.data.nombrefiscal,document.querySelector("#txtDireccion").value=e.data.direccionfiscal,$("#listStatus").selectpicker("refresh"),$("#modalFormCliente").modal("show")):swal("¡Error!",e.msg,"error")}}}function fntDelCliente(e){swal({title:"Eliminar Cliente",text:"¿Realente quiere eliminar el Cliente?",type:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"No, cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(t){if(t){divLoading.style.display="flex";let t=window.XMLHttpRequest?XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"),a=BaseUrl+"/Clientes/DelCliente/",n="idUsuario="+e;console.log(t),t.open("POST",a,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(n),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){let e=JSON.parse(t.responseText);e.status?(swal("¡Eliminar!",e.msg,"success"),tableUsuarios.api().ajax.reload()):swal("¡Error!",e.msg,"error")}return divLoading.style.display="none",!1}}})}function openModal(){rowTable="",document.querySelector("#idUsuario").value="",document.querySelector(".modal-header").classList.replace("headerUpdate","headerRegister"),document.querySelector("#btnActionForm").classList.replace("btn-info","btn-primary"),document.querySelector("#btnText").innerHTML="Guardar",document.querySelector("#titleModal").innerHTML="Nuevo Cliente",document.querySelector("#formCliente").reset(),$("#modalFormCliente").modal("show")}let tableUsuarios,rowTable,divLoading=document.querySelector("#divLoading");document.addEventListener("DOMContentLoaded",function(){tableUsuarios=$("#tableClientes").dataTable({aProcessing:!0,aServerSide:!0,language:{url:"//cdn.datatables.net/plug-ins/1.10.20/i18n/Spanish.json"},ajax:{url:BaseUrl+"/Clientes/GetClientes",dataSrc:""},columns:[{data:"idpersona"},{data:"nombres"},{data:"apellidos"},{data:"email_user"},{data:"telefono"},{data:"status"},{data:"options"}],dom:"lBfrtip",buttons:[{extend:"copyHtml5",text:"<i class='fas fa-copy'></i> Copiar",titleAttr:"Copiar",className:"btn btn-secondary"},{extend:"excelHtml5",text:"<i class='fas fa-file-excel'></i> Excel",titleAttr:"Exportar a Excel",className:"btn btn-success"},{extend:"pdfHtml5",text:"<i class='fas fa-file-pdf'></i> PDF",titleAttr:"Exportar a PDF",className:"btn btn-danger"},{extend:"csvHtml5",text:"<i class='fas fa-file-csv'></i> CSV",titleAttr:"Exportar a CSV",className:"btn btn-info"}],responsive:"true",bDestroy:!0,iDisplayLength:10,order:[[1,"asc"]]});let e=document.querySelector("#formCliente");e.onsubmit=function(t){t.preventDefault();let a=document.querySelector("#txtIdentificacion").value,n=document.querySelector("#txtNombres").value,o=document.querySelector("#txtApellidos").value,r=document.querySelector("#txtEmail").value,l=document.querySelector("#txtTelefono").value,s=(document.querySelector("#txtPassword").value,document.querySelector("#listStatus").value),i=document.querySelector("#txtIdentificacionTributaria").value,c=document.querySelector("#txtRazon").value,d=document.querySelector("#txtDireccion").value;if(""==a||""==n||""==o||""==r||""==l||""==i||""==c||""==d)return swal("Atención","Todos los campos son obligatorios","error"),!1;let u=document.getElementsByClassName("valid");for(let e=0;e<u.length;e++)if(u[e].classList.contains("is-invalid"))return swal("Atención","Por favor verifique los campos en rojo.","error"),!1;divLoading.style.display="flex";let m=window.XMLHttpRequest?XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"),p=BaseUrl+"/Clientes/SetCliente",f=new FormData(e);m.open("POST",p,!0),m.send(f),m.onreadystatechange=function(){if(4==m.readyState&&200==m.status){let t=JSON.parse(m.responseText);t.status?(""==rowTable?tableUsuarios.api().ajax.reload():(htmlStatus=1==s?'<span class="badge badge-success">Activo</span>':'<span class="badge badge-danger">Inactivo</span>',rowTable.cells[1].textContent=n,rowTable.cells[2].textContent=o,rowTable.cells[3].textContent=r,rowTable.cells[4].textContent=l,rowTable.cells[5].innerHTML=htmlStatus),$("#modalFormCliente").modal("hide"),e.reset(),swal("Cliente",t.msg,"success")):swal("¡Error!",t.msg,"error")}return divLoading.style.display="none",!1}}},!1);