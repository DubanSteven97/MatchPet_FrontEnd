function fntViewOrganizacio(e){let t=window.XMLHttpRequest?XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"),a=BaseUrl+"/Organizaciones/GetOrganizacion/"+e;t.open("GET",a,!0),t.send(),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){let e=JSON.parse(t.responseText);if(e.status){let t=1==e.data.estado?'<span class="badge badge-success">Activo</span>':'<span class="badge badge-danger">Inactivo</span>';document.querySelector("#celNombre").innerHTML=e.data.nombre,document.querySelector("#celTelefono").innerHTML=e.data.telefono,document.querySelector("#celDireccion").innerHTML=e.data.direccion,document.querySelector("#celDescripcion").innerHTML=e.data.descripcion,document.querySelector("#celEstado").innerHTML=t,$("#modalViewOrganizacion").modal("show")}else swal("¡Error!",e.msg,"error")}}}function fntViewUsersByOrganizacio(e){let t=window.XMLHttpRequest?XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"),a=BaseUrl+"/Organizaciones/GetUserByOrganizacion/"+e;t.open("GET",a,!0),t.send(),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){let a=JSON.parse(t.responseText);if(a.status){for(var e=document.getElementById("tableUsersByOrganizaciones");e.rows.length>0;)e.deleteRow(0);$("#modalViewUserByOrganizacion").modal("show"),Object.entries(a.data).forEach(([e,t])=>{var a=htmlStatus=1==t.estado?'<span class="badge badge-success">Activo</span>':'<span class="badge badge-danger">Inactivo</span>',n="<tr><td>"+t.idPersona+"</td><td>"+t.nombres+" "+t.apellidos+"</td><td>"+t.email+"</td><td>"+t.numero_identificacion+"</td><td>"+t.telefono+"</td><td>"+a+"</td></tr>";document.getElementById("tableUsersByOrganizaciones").insertRow(-1).innerHTML=n})}else swal("¡Error!",a.msg,"error")}}}function fntEditOrganizacion(e,t){rowTable=e.parentNode.parentNode.parentNode,document.querySelector(".modal-header").classList.replace("headerRegister","headerUpdate"),document.querySelector("#btnActionForm").classList.replace("btn-primary","btn-info"),document.querySelector("#btnText").innerHTML="Actualizar",document.querySelector("#titleModal").innerHTML="Actualizar organización";let a=window.XMLHttpRequest?XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"),n=BaseUrl+"/Organizaciones/GetOrganizacion/"+t;a.open("GET",n,!0),a.send(),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){let e=JSON.parse(a.responseText);e.status?(document.querySelector("#idOrganizacion").value=e.data.idOrganizacion,document.querySelector("#txtNombre").value=e.data.nombre,document.querySelector("#txtTelefono").value=e.data.telefono,document.querySelector("#txtDireccion").value=e.data.direccion,document.querySelector("#txtDescripcion").value=e.data.descripcion,document.querySelector("#listStatus").value=e.data.estado,$("#listStatus").selectpicker("refresh"),$("#modalFormOrganizacion").modal("show")):swal("¡Error!",e.msg,"error")}}}function fntDelOrganiazcion(e){swal({title:"Eliminar el Rol",text:"¿Realmente quiere eliminar el Rol?",type:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"No, cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(t){if(t){divLoading.style.display="flex";let t=window.XMLHttpRequest?XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"),a=BaseUrl+"/Organizaciones/DelOrganizacion/"+e;t.open("GET",a,!0),t.send(),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){let e=JSON.parse(t.responseText);e.estado?(swal("¡Eliminar!",e.msg,"success"),tableOrganizaciones.api().ajax.reload()):swal("¡Error!",e.msg,"error")}return divLoading.style.display="none",!1}}})}function openModal(){document.querySelector("#idOrganizacion").value="",document.querySelector(".modal-header").classList.replace("headerUpdate","headerRegister"),document.querySelector("#btnActionForm").classList.replace("btn-info","btn-primary"),document.querySelector("#btnText").innerHTML="Guardar",document.querySelector("#titleModal").innerHTML="Nueva Organización",document.querySelector("#formOrganizacion").reset(),$("#modalFormOrganizacion").modal("show")}let rowTable,tableOrganizaciones;var divLoading=document.querySelector("#divLoading");document.addEventListener("DOMContentLoaded",function(){tableOrganizaciones=$("#tableOrganizaciones").dataTable({aProcessing:!0,aServerSide:!0,language:{url:"//cdn.datatables.net/plug-ins/1.10.20/i18n/Spanish.json"},ajax:{url:BaseUrl+"/Organizaciones/GetOrganizaciones",dataSrc:""},columns:[{data:"idOrganizacion"},{data:"nombre"},{data:"descripcion"},{data:"telefono"},{data:"direccion"},{data:"estado"},{data:"options"}],dom:"lBfrtip",buttons:[{extend:"copyHtml5",text:"<i class='fas fa-copy'></i> Copiar",titleAttr:"Copiar",className:"btn btn-secondary"},{extend:"excelHtml5",text:"<i class='fas fa-file-excel'></i> Excel",titleAttr:"Exportar a Excel",className:"btn btn-success"},{extend:"pdfHtml5",text:"<i class='fas fa-file-pdf'></i> PDF",titleAttr:"Exportar a PDF",className:"btn btn-danger"},{extend:"csvHtml5",text:"<i class='fas fa-file-csv'></i> CSV",titleAttr:"Exportar a CSV",className:"btn btn-info"}],responsive:"true",bDestroy:!0,iDisplayLength:10,order:[[0,"asc"]]});let e=document.querySelector("#formOrganizacion");e.onsubmit=function(t){t.preventDefault();let a=document.querySelector("#txtNombre").value,n=document.querySelector("#txtTelefono").value,o=(document.querySelector("#txtDireccion").value,document.querySelector("#listStatus").value),r=document.querySelector("#txtDescripcion").value;if(""==a||""==o)return swal("Atención","Todos los campos son obligatorios","error"),!1;let s=document.getElementsByClassName("valid");for(let e=0;e<s.length;e++)if(s[e].classList.contains("is-invalid"))return swal("Atención","Por favor verifique los campos en rojo.","error"),!1;divLoading.style.display="flex";let i=window.XMLHttpRequest?XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"),c=BaseUrl+"/Organizaciones/SetOrganizacion",l=new FormData(e);i.open("POST",c,!0),i.send(l),i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){let t=JSON.parse(i.responseText);t.status?(""==rowTable||void 0===rowTable?tableOrganizaciones.api().ajax.reload():(htmlStatus=1==o?'<span class="badge badge-success">Activo</span>':'<span class="badge badge-danger">Inactivo</span>',rowTable.cells[1].textContent=a,rowTable.cells[2].textContent=r,rowTable.cells[3].textContent=n,rowTable.cells[4].textContent=r,rowTable.cells[5].innerHTML=htmlStatus),$("#modalFormOrganizacion").modal("hide"),e.reset(),swal("Modulos",t.msg,"success")):swal("¡Error!",t.msg,"error")}return divLoading.style.display="none",!1}}},!1);